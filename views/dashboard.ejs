<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Varela+Round&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="http://127.0.0.1:4000/css/dashboard-styles.css"
    />

    <title>Dashboard - Syslogic KPI System</title>
  </head>
  <body>
    <header>
      <%- include('includes/siteLogo') %> <%- include('includes/navigationBar')
      %>
    </header>
    <div id="page-container">
      <div class="wrapper">
        <main>
          <h1>
            Welcome Back, <%= userDetails.firstName[0].toUpperCase() +
            userDetails.firstName.substring(1) %>
          </h1>
        </main>

        <section class="user-site-stats">
          <div class="stat-box">
            <svg
              width="37"
              height="37"
              viewBox="0 0 37 37"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="0.5"
                y="0.5"
                width="36"
                height="36"
                rx="6.5"
                fill="white"
                stroke="#D9D9D9"
              />
              <path
                d="M12 11.6C12 11.1757 12.1686 10.7687 12.4686 10.4686C12.7687 10.1686 13.1757 10 13.6 10H20C20.2122 10 20.4156 10.0844 20.5656 10.2344L24.5656 14.2344C24.7156 14.3844 24.8 14.5878 24.8 14.8V24.4C24.8 24.8243 24.6314 25.2313 24.3314 25.5314C24.0313 25.8314 23.6243 26 23.2 26H13.6C13.1757 26 12.7687 25.8314 12.4686 25.5314C12.1686 25.2313 12 24.8243 12 24.4V11.6ZM22.8688 14.8L20 11.9312V14.8H22.8688ZM18.4 11.6H13.6V24.4H23.2V16.4H19.2C18.9878 16.4 18.7843 16.3157 18.6343 16.1657C18.4843 16.0157 18.4 15.8122 18.4 15.6V11.6ZM15.2 18.8C15.2 18.5878 15.2843 18.3843 15.4343 18.2343C15.5843 18.0843 15.7878 18 16 18H20.8C21.0122 18 21.2157 18.0843 21.3657 18.2343C21.5157 18.3843 21.6 18.5878 21.6 18.8C21.6 19.0122 21.5157 19.2157 21.3657 19.3657C21.2157 19.5157 21.0122 19.6 20.8 19.6H16C15.7878 19.6 15.5843 19.5157 15.4343 19.3657C15.2843 19.2157 15.2 19.0122 15.2 18.8ZM15.2 22C15.2 21.7878 15.2843 21.5843 15.4343 21.4343C15.5843 21.2843 15.7878 21.2 16 21.2H20.8C21.0122 21.2 21.2157 21.2843 21.3657 21.4343C21.5157 21.5843 21.6 21.7878 21.6 22C21.6 22.2122 21.5157 22.4157 21.3657 22.5657C21.2157 22.7157 21.0122 22.8 20.8 22.8H16C15.7878 22.8 15.5843 22.7157 15.4343 22.5657C15.2843 22.4157 15.2 22.2122 15.2 22Z"
                fill="#3A3A3A"
              />
            </svg>
            <p>Total Records</p>
            <p class="count">1250</p>
          </div>
          <div class="stat-box">
            <svg
              width="37"
              height="37"
              viewBox="0 0 37 37"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="0.5"
                y="0.5"
                width="36"
                height="36"
                rx="6.5"
                fill="white"
                stroke="#D9D9D9"
              />
              <path
                d="M12 11.6C12 11.1757 12.1686 10.7687 12.4686 10.4686C12.7687 10.1686 13.1757 10 13.6 10H20C20.2122 10 20.4156 10.0844 20.5656 10.2344L24.5656 14.2344C24.7156 14.3844 24.8 14.5878 24.8 14.8V24.4C24.8 24.8243 24.6314 25.2313 24.3314 25.5314C24.0313 25.8314 23.6243 26 23.2 26H13.6C13.1757 26 12.7687 25.8314 12.4686 25.5314C12.1686 25.2313 12 24.8243 12 24.4V11.6ZM22.8688 14.8L20 11.9312V14.8H22.8688ZM18.4 11.6H13.6V24.4H23.2V16.4H19.2C18.9878 16.4 18.7843 16.3157 18.6343 16.1657C18.4843 16.0157 18.4 15.8122 18.4 15.6V11.6ZM21.3656 18.2344C21.5156 18.3844 21.5998 18.5879 21.5998 18.8C21.5998 19.0121 21.5156 19.2156 21.3656 19.3656L18.1656 22.5656C18.0156 22.7156 17.8121 22.7998 17.6 22.7998C17.3879 22.7998 17.1844 22.7156 17.0344 22.5656L15.4344 20.9656C15.358 20.8918 15.297 20.8035 15.2551 20.7059C15.2132 20.6083 15.1911 20.5033 15.1902 20.3971C15.1893 20.2909 15.2095 20.1856 15.2497 20.0872C15.29 19.9889 15.3494 19.8996 15.4245 19.8245C15.4996 19.7494 15.5889 19.69 15.6872 19.6497C15.7856 19.6095 15.8909 19.5893 15.9971 19.5902C16.1033 19.5911 16.2083 19.6132 16.3059 19.6551C16.4035 19.697 16.4918 19.758 16.5656 19.8344L17.6 20.8688L20.2344 18.2344C20.3844 18.0844 20.5879 18.0002 20.8 18.0002C21.0121 18.0002 21.2156 18.0844 21.3656 18.2344Z"
                fill="#3A3A3A"
              />
            </svg>
            <p>Completed Records</p>
            <p class="count">950</p>
          </div>
        </section>

        <section class="members">
          <div class="site-actions">
            <h1>Company List (<%= companyData.length %>)</h1>
            <div class="buttons">
              <input
                class="delete-record"
                type="submit"
                value="Delete Company"
              />
              <input
                class="add-new-record"
                type="submit"
                value="Add New Company"
              />
            </div>
          </div>

          <div class="member-table">
            <table>
              <tr>
                <th>#</th>
                <th>Company</th>
                <th>Description</th>
                <th>Start Date</th>
                <th>End Date</th>
              </tr>

              <% for (let i = 0; i < companyData.length; i++) {%>

              <tr>
                <th>
                  <input type="checkbox" value="<%= companyData[i]._id %>" />
                </th>
                <td>
                  <a
                    class="companyName"
                    href="/record/<%= companyData[i]._id %>"
                    ><%= companyData[i].name[0].toUpperCase() +
                    companyData[i].name.substring(1) %> ->
                  </a>
                </td>
                <td><%= companyData[i].description %></td>

                <% const getNewDate = (oldDate) => { let options = { weekday:
                "long", year: "numeric", month: "long", day: "numeric", };
                return new Date(oldDate).toLocaleDateString("en-US", options) }
                %>

                <td><%= getNewDate(companyData[i].startDate) %></td>

                <td><%= getNewDate(companyData[i].endDate) %></td>
              </tr>

              <% } %>
            </table>
          </div>
        </section>
      </div>
      <!-- <footer>
        <p>Syslogic KPI System</p>
      </footer> -->
    </div>

    <div class="add-record record-modal-window hidden">
      <div class="container">
        <h1>Add a New Company</h1>
        <svg
          class="modal-close-btn"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18L18 6M6 6l12 12"
          ></path>
        </svg>
        <form id="add-new-company" action="#">
          <label class="data-label" for="company-Name">Company Name</label>
          <input
            placeholder="Company Name"
            class="data-input"
            type="text"
            name="company-Name"
            id="companyName"
            required
          />

          <label class="data-label" for="lName">Description</label>
          <input
            placeholder="Company Description"
            class="data-input"
            type="text"
            name="lName"
            id="companyDescription"
          />

          <label class="data-label" for="start-date">Start Date</label>
          <input
            class="data-input"
            type="date"
            name="start-date"
            id="companyKpiStartDate"
            required
          />

          <label class="data-label" for="end-date">End Date</label>
          <input
            class="data-input"
            type="date"
            name="end-date"
            id="companyKpiEndDate"
            required
          />

          <input
            id="userId"
            type="text"
            hidden
            value="<%= userDetails._id %>"
          />

          <input class="signup-btn" type="submit" value="Add" />
        </form>
      </div>
    </div>

    <div class="overlay hidden"></div>

    <script src="http://127.0.0.1:4000/js/logout.js"></script>
    <script src="http://127.0.0.1:4000/js/script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
  </body>
</html>
